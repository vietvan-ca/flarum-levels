{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@vietvan-ca/flarum-levels/webpack/bootstrap","webpack://@vietvan-ca/flarum-levels/webpack/runtime/compat get default export","webpack://@vietvan-ca/flarum-levels/webpack/runtime/define property getters","webpack://@vietvan-ca/flarum-levels/webpack/runtime/hasOwnProperty shorthand","webpack://@vietvan-ca/flarum-levels/external root \"flarum.core.compat['forum/app']\"","webpack://@vietvan-ca/flarum-levels/external root \"flarum.core.compat['common/extend']\"","webpack://@vietvan-ca/flarum-levels/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@vietvan-ca/flarum-levels/external root \"flarum.core.compat['forum/components/PostUser']\"","webpack://@vietvan-ca/flarum-levels/external root \"flarum.core.compat['common/Model']\"","webpack://@vietvan-ca/flarum-levels/external root \"flarum.core.compat['common/models/User']\"","webpack://@vietvan-ca/flarum-levels/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@vietvan-ca/flarum-levels/external root \"flarum.core.compat['common/Component']\"","webpack://@vietvan-ca/flarum-levels/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@vietvan-ca/flarum-levels/./src/forum/components/UserLevelDisplay.js","webpack://@vietvan-ca/flarum-levels/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@vietvan-ca/flarum-levels/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostUser'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\nimport icon from 'flarum/common/helpers/icon';\n\nexport default class UserLevelDisplay extends Component {\n  view() {\n    const user = this.attrs.user;\n    const level = user.level();\n    \n    if (!level) return null;\n    \n    const levelColor = level.color || '#0072ff';\n    \n    return (\n      <div className=\"UserLevelDisplay\">\n        <div className=\"UserLevel-badge\" style={{ backgroundColor: levelColor }}>\n          {level.icon && icon(level.icon)}\n          <span className=\"UserLevel-name\"> {app.translator.trans('vietvan-ca-flarum-levels.forum.user.level_badge', { name: level.name })}</span>\n        </div>\n      </div>\n    );\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport PostUser from 'flarum/forum/components/PostUser';\nimport Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\nimport UserLevelDisplay from './components/UserLevelDisplay';\nimport icon from 'flarum/common/helpers/icon';\n\napp.initializers.add('vietvan-ca-levels', () => {\n  // Add level attributes to User model\n  User.prototype.xp = Model.attribute('xp');\n  User.prototype.level = Model.attribute('level');\n  User.prototype.isManualLevel = Model.attribute('is_manual_level');\n  \n  // Add level badge to user cards\n  extend(UserCard.prototype, 'infoItems', function(items) {\n    const user = this.attrs.user;\n    const level = user.level();\n    \n    if (level) {\n      items.add('level', <UserLevelDisplay user={user} />, 10);\n    }\n  });\n  \n  // Add level to discussion posts (this is what you're missing)\n  extend(PostUser.prototype, 'view', function(vdom) {\n    // Find the user's level\n    const user = this.attrs.post.user();\n    if (!user || !user.level()) return;\n    \n    const level = user.level();\n    \n    // Create level badge element\n    const levelBadge = (\n      <span \n        className=\"PostUser-level\" \n        style={level.color ? {backgroundColor: level.color} : {}}\n        title={level.description || ''}\n      >\n        {level.icon && <span className=\"PostUser-level-icon\">{icon(level.icon)}</span>}\n        <span className=\"PostUser-level-name\"> {level.name}</span>\n      </span>\n    );\n    \n    // If vdom is an array of elements\n    if (Array.isArray(vdom.children)) {\n      // Find where to insert the level badge (after username)\n      // Usually after the first or second element depending on your theme\n      if (vdom.children.length > 1) {\n        // Insert after username\n        vdom.children.splice(2, 0, levelBadge);\n      } else {\n        // Append at the end\n        vdom.children.push(levelBadge);\n      }\n    }\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","UserLevelDisplay","_Component","apply","arguments","create","constructor","view","level","this","attrs","user","levelColor","color","m","className","style","backgroundColor","icon","app","trans","name","Component","add","User","xp","Model","isManualLevel","extend","UserCard","items","PostUser","vdom","post","levelBadge","title","description","Array","isArray","children","length","splice","push"],"sourceRoot":""}